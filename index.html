<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="teste.css">
    <link rel="icon" href="imagens/TokenDoFeiticeiro.png">
    <title>Contagem de Tokens</title>
</head>
<body>
    <div>
        <div class="tokenSelection">
            <h3>Tokens Koda</h3>
            <div id="koda" class="image-container">
            </div>
            <div class="button-container">
            <button type="button" onclick="AddNewLayer('koda')">+</button>
            <h3 id="ammKoda">0/10</h3>
            <button type="button" onclick="RemoveNewLayer('koda')">-</button>
            </div>
        </div>
        <div class="tokenSelection">
            <h3>Tokens Ifera</h3>
            <div id="ifera" class="image-container">
            </div>
            <div class="button-container">
            <button type="button" onclick="AddNewLayer('ifera')">+</button>
            <h3 id="ammIfera">0/10</h3>
            <button type="button" onclick="RemoveNewLayer('ifera')">-</button>
            </div>
        </div>
        <div class="tokenSelection">
            <h3>Tokens Henri</h3>
            <div id="henri" class="image-container">
            </div>
            <div class="button-container">
            <button type="button" onclick="AddNewLayer('henri')">+</button>
            <h3 id="ammHenri">0/10</h3>
            <button type="button" onclick="RemoveNewLayer('henri')">-</button>
            </div>
        </div>
    </div>
</body>
<script>
function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
    const expires = "expires=" + d.toUTCString();
    document.cookie = `${name}=${value}; ${expires}; path=/`;
}

function getCookie(name) {
    const cookies = document.cookie.split('; ');
    for (const cookie of cookies) {
        const [key, value] = cookie.split('=');
        if (key === name) {
            return value;
        }
    }
    return null;
}

function loadTokens(containerId, counterId, tokenImage) {
    const savedTokens = getCookie(containerId);
    const container = document.getElementById(containerId);
    const counter = document.getElementById(counterId);
    if (savedTokens) {
        const tokenCount = parseInt(savedTokens, 10);
        for (let i = 0; i < tokenCount; i++) {
            container.innerHTML += `<img src="${tokenImage}" alt="token">`;
        }
        counter.innerHTML = `${tokenCount}/10`;
    }
}

function AddNewLayer(containerId) {
    const container = document.getElementById(containerId);
    const counterId = `amm${containerId.charAt(0).toUpperCase()}${containerId.slice(1)}`;
    const counter = document.getElementById(counterId);
    let tokenImage;

    if (containerId === 'koda') tokenImage = 'imagens/TokenDoEngenhoso.png';
    else if (containerId === 'ifera') tokenImage = 'imagens/TokenDoAltruismo.png';
    else if (containerId === 'henri') tokenImage = 'imagens/TokenDoGuerreiro.png';

    if (container.children.length <= 9) {
        container.innerHTML += `<img src="${tokenImage}" alt="token">`;
        const tokenCount = container.children.length;
        counter.innerHTML = `${tokenCount}/10`;
        setCookie(containerId, tokenCount, 7); // Save token count to cookie
    }
}

function RemoveNewLayer(containerId) {
    const container = document.getElementById(containerId);
    const counterId = `amm${containerId.charAt(0).toUpperCase()}${containerId.slice(1)}`;
    const counter = document.getElementById(counterId);

    if (container.children.length > 0) {
        container.removeChild(container.lastElementChild);
        const tokenCount = container.children.length;
        counter.innerHTML = `${tokenCount}/10`;
        setCookie(containerId, tokenCount, 7); // Update token count in cookie
    }
}

// Load tokens on page load
window.onload = function () {
    loadTokens('koda', 'ammKoda', 'imagens/TokenDoEngenhoso.png');
    loadTokens('ifera', 'ammIfera', 'imagens/TokenDoAltruismo.png');
    loadTokens('henri', 'ammHenri', 'imagens/TokenDoGuerreiro.png');
};
</script>
</html>